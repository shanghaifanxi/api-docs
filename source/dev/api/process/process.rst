
流程
======================

说明
-----------------------------------------------------------------------------------------------------------------------
- 流程增删该查

1、流程列表、新增流程、批量删除流程 API
-----------------------------------------------------------------------------------------------------------------------

**请求方式：**   GET（查询） POST（新增） DELETE（批量删除）

**请求地址：**   /api/process/process/


**Content-Type：**
::

    新增数据的时候需要指定Content-Type，以下对Content-Type进行说明:

    application/x-www-form-urlencoded —— 表示通过表单方式提交
    application/json —— 表示传入数据为json格式字符串


**查询参数：**

+------------------------+------------+------------+------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                        |
+------------------------+------------+------------+------------------------------------------------+
| name                   | string     | 是         | 项目名称                                       |
+------------------------+------------+------------+------------------------------------------------+


**输入参数（新增）：**

+------------------------+------------+------------+------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                        |
+------------------------+------------+------------+------------------------------------------------+
| name                   | string     | 是         | 项目名称                                       |
+------------------------+------------+------------+------------------------------------------------+
| project                | string     | 是         | 项目地址                                       |
+------------------------+------------+------------+------------------------------------------------+
| mark                   | string     | 否         | 备注                                           |
+------------------------+------------+------------+------------------------------------------------+


**输出参数：**

+------------------------+------------+------------+------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                        |
+------------------------+------------+------------+------------------------------------------------+
| name                   | string     | 是         | 项目名称                                       |
+------------------------+------------+------------+------------------------------------------------+
| project                | string     | 是         | 项目地址                                       |
+------------------------+------------+------------+------------------------------------------------+
| mark                   | string     | 否         | 备注                                           |
+------------------------+------------+------------+------------------------------------------------+


**批量删除参数：**

+------------------------+------------+-------------------+-------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**       |**说明**                                         |
+------------------------+------------+-------------------+-------------------------------------------------+
| pk                     | string     | 与pk[]不能都为空  | 主键，多个主键用半角逗号隔开。通过http body传入 |
+------------------------+------------+-------------------+-------------------------------------------------+
| pk[]                   | array      | 与pk不能都为空    | 主键数组。通过http body传入                     |
+------------------------+------------+-------------------+-------------------------------------------------+


**排序：**

+------------------------+------------+-------------------+---------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**       |**说明**                                           |
+------------------------+------------+-------------------+---------------------------------------------------+
|                        |            |                   |   一般默认按id倒叙                                |
| ordering               | string     | 否                | - ordering=id表示按id排序ordering=-id表示按id倒叙 |
|                        |            |                   | - 多个字段排序用半角逗号分隔                      |
+------------------------+------------+-------------------+---------------------------------------------------+

**GET返回数据例子：**
::

    {
        "count": 9,
        "next": null,
        "previous": null,
        "results": [
            {
                "id": 1001,
                "name": "测试",
                "cuser": 18,
                "user": "san zhang",
                "ctime": 1561688923,
                "utime": 1561689923,
                "project": "测试",
                "mark": "新增测试流程",
            },
            {
                "id": 1002,
                "name": "测试",
                "cuser": 18,
                "user": "si li",
                "ctime": 1561688924,
                "utime": 1561689924,
                "project": "测试2",
                "mark": "新增测试流程2",
            }
           {
                "id": 1003,
                "name": "测试",
                "cuser": 18,
                "user": "wu wang",
                "ctime": 1561688925,
                "utime": 1561689925,
                "project": "测试3",
                "mark": "新增测试流程3",
            }
        ]
    }

**新增流程返回数据例子：**
::

    {
        "id": 1001,
        "name": "测试",
        "cuser": 18,
        "user": "fei yao",
        "ctime": 1561688923,
        "utime": 1561689923,
        "project": "测试",
        "mark": "新增测试流程",
    }

2、获取单个流程，修改流程、删除流程 API
----------------------------------------------------------------------------------------------------------

**请求方式：**    GET（查询） PUT（修改） PATCH（修改） DELETE（删除）

**请求地址：**    /api/process/process/1001/
::

    请求地址中1001为流程的id


**输入/输出参数：**   见章节1中输入和输出参数说明，修改数据时输入参数均为非必须

**返回数据例子：**
::
    {
        "id": 1001,
        "name": "测试",
        "cuser": 18,
        "user": "san zhang",
        "ctime": 1561688923,
        "utime": 1561689923,
        "project": "测试",
        "mark": "新增测试流程",
    },


3、保存流程 API
----------------------------------------------------------------------------------------------------------

**请求方式：**    POST

**请求地址：**    /api/process/save/


**输入参数（新增）：**

数据由body传入

**返回数据例子：**
::
    {
        "success": true,
    }


4、提交流程 API
----------------------------------------------------------------------------------------------------------

**请求方式：**    POST

**请求地址：**    /api/process/upload/


**输入参数（新增）：**

+------------------------+------------+------------+----------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                |
+------------------------+------------+------------+----------------------------------------+
| id                     | string     | 是         | 流程ID                                 |
+------------------------+------------+------------+----------------------------------------+

**返回数据例子：**
::
    {
        "success": true,
    }


5、执行流程 API
----------------------------------------------------------------------------------------------------------

**请求方式：**    POST

**请求地址：**    /api/process/execute/


**输入参数（新增）：**

+------------------------+------------+------------+----------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                |
+------------------------+------------+------------+----------------------------------------+
| id                     | string     | 是         | 流程ID                                 |
+------------------------+------------+------------+----------------------------------------+

**返回数据例子：**
::
    {
        "success": true,
        "job_id": 123,
    }


6、停止流程 API
----------------------------------------------------------------------------------------------------------

**请求方式：**    POST

**请求地址：**    /api/process/stop/123/

::

    请求地址中123为job_id


**输入参数（新增）：**

+------------------------+------------+------------+----------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                |
+------------------------+------------+------------+----------------------------------------+
| job_id                 | int        | 是         | job_id                                 |
+------------------------+------------+------------+----------------------------------------+

**返回数据例子：**
::
    {
        "success": true,
    }


7、文件列表 API
----------------------------------------------------------------------------------------------------------

**请求方式：**    GET

**请求地址：**    /api/process/file/list/

::  

**输入参数（查询）：**

+------------------------+------------+------------+----------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                |
+------------------------+------------+------------+----------------------------------------+
| id                     | string     | 是         | 流程ID                                 |
+------------------------+------------+------------+----------------------------------------+

**返回数据例子：**
::
    {
        "name": "aaa",
        "type": "direcotory",
        "children": [ 
            {
                "name":"bbb",
                "type":"directory",
                "children":[
                    {
                        "name": "ddd",
                        "type": "directory",
                        "children": []
                    }
                ]
            },
            {
                "name":"ccc",
                "type":"directory",
                "children":[
                    {
                        "name": "eee.ymal",
                        "type": "file",
                        "children": []
                    }
                ]

            }
        ]
    }


8、文件保存 API
----------------------------------------------------------------------------------------------------------

**请求方式：**    POST

**请求地址：**    /api/process/file/save/

::

**输入参数（新增）：**

+------------------------+------------+------------+----------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                |
+------------------------+------------+------------+----------------------------------------+
| id                     | string     | 是         | 流程ID                                 |
+------------------------+------------+------------+----------------------------------------+
| path                   | string     | 是         | 需要修改的文件的路径                   |
+------------------------+------------+------------+----------------------------------------+

**返回数据例子：**
::
    {
        "success": true,
    }


9、文件拷贝 API
----------------------------------------------------------------------------------------------------------

**请求方式：**    POST

**请求地址：**    /api/process/file/copy/

::

**输入参数（新增）：**

+------------------------+------------+------------+----------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                |
+------------------------+------------+------------+----------------------------------------+
| id                     | string     | 是         | 流程ID                                 |
+------------------------+------------+------------+----------------------------------------+

**返回数据例子：**
::
    {
        "success": true,
    }


